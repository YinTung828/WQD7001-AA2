import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px

df = pd.read_csv("air-passengers-carried.csv")
# Rename the column 'Air transport, passengers carried' to 'Passengers_Carried'
df.rename(columns={'Air transport, passengers carried': 'Passengers_Carried'}, inplace=True)
# Iterate over the rows and fill missing 'Code' values with first three characters of 'Entity'
for index, row in df.iterrows():
    if pd.isna(row['Code']):
        df.at[index, 'Code'] = row['Entity'][:3].upper()
df_1 = df.copy()

import dash
from dash import dcc, html
from dash.dependencies import Input, Output
import plotly.express as px

# Assuming df_1 is your DataFrame containing relevant data
# You should replace it with your actual DataFrame

# List of countries you want to visualize
countries = df_1['Entity'].unique()

# Initialize the Dash app
app = dash.Dash(__name__)

# Layout of the app
app.layout = html.Div([
    # Dropdown for selecting the country
    dcc.Dropdown(
        id='country-dropdown',
        options=[{'label': country, 'value': country} for country in countries],
        value='Malaysia',  # Default selected value
        style={'width': '50%'}
    ),
    
    # Placeholder for the Treemap chart
    dcc.Graph(id='treemap-chart'),
])

# Callback to update the Treemap chart based on the selected country
@app.callback(
    Output('treemap-chart', 'figure'),
    [Input('country-dropdown', 'value')]
)
def update_chart(selected_entity):
    # Filter the DataFrame for the selected 'Entity'
    df_entity = df_1[df_1['Entity'] == selected_entity]
    
    # Add a constant 'world' column to simulate a continent level
    df_entity['world'] = 'world'
    
    # Create a treemap chart for the selected 'Entity'
    fig = px.treemap(df_entity, path=['world', 'Year'], values='Passengers_Carried',
                     color='Passengers_Carried', hover_data=['Year'],
                     title=f'Treemap Chart for {selected_entity}',
                     labels={'Year': 'Year', 'Passengers_Carried': 'Air Transport Passenger_Carried'})
    
    return fig

# Run the app
if __name__ == '__main__':
    app.run_server(debug=True)

import matplotlib.pyplot as plt
import numpy as np
from matplotlib.animation import FuncAnimation
from IPython.display import HTML

# Assuming df_1 is defined and has the necessary data
fig, ax = plt.subplots(figsize=(10, 3), dpi=90)  # Adjust the figure size here

# Generate a simplified colormap
colors = plt.cm.viridis(np.linspace(0, 1, 5))

def update(selected_year):
    ax.clear()

    # Filter the DataFrame for the selected year and sort by Passengers_Carried
    df_selected_year = df_1[df_1['Year'] == selected_year].sort_values(by='Passengers_Carried', ascending=True).nlargest(5, 'Passengers_Carried')

    # Use a simplified colormap
    bars = ax.barh(y=df_selected_year["Entity"], width=df_selected_year["Passengers_Carried"], color=colors)

    # Display exact values on the bars
    for bar in bars:
        width = bar.get_width()
        ax.text(width, bar.get_y() + bar.get_height() / 2, f'{width:.0f}', ha='left', va='center')

    ax.set_title(f"Entity-wise tourists distribution for {selected_year}")
    ax.set_xlabel("Passengers Carried")
    ax.set_ylabel("Entity")
    ax.grid(axis='x', linestyle='--', alpha=0.6)

# Create an animation
animation = FuncAnimation(fig, update, frames=np.arange(1994, 2021), interval=500, repeat=False)

# Display the animation
HTML(animation.to_jshtml())

